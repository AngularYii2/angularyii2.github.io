/**
 * angular-strap
 * @version v2.2.4 - 2015-05-28
 * @link http://mgcrea.github.io/angular-strap
 * @author Olivier Louvignes <olivier@mg-crea.com> (https://github.com/mgcrea)
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
'use strict';angular.module('mgcrea.ngStrap.modal',['mgcrea.ngStrap.helpers.dimensions']).provider('$modal',function(){var e=this.defaults={animation:'am-fade',backdropAnimation:'am-fade',prefixClass:'modal',prefixEvent:'modal',placement:'top',template:'modal/modal.tpl.html',contentTemplate:!1,container:!1,element:null,backdrop:!0,keyboard:!0,html:!1,show:!0};this.$get=['$window','$rootScope','$compile','$q','$templateCache','$http','$animate','$timeout','$sce','dimensions',function(n,t,o,i,a,r,l,s,c,u){function d(n){function i(){w.$emit(d.prefixEvent+'.show',u)}function a(){w.$emit(d.prefixEvent+'.hide',u),v.removeClass(d.prefixClass+'-open'),d.animation&&v.removeClass(d.prefixClass+'-with-'+d.animation)}function r(e){e.target===e.currentTarget&&('static'===d.backdrop?u.focus():u.hide())}function s(e){e.preventDefault()}var u={},d=u.$options=angular.extend({},e,n);u.$promise=f(d.template);var w=u.$scope=d.scope&&d.scope.$new()||t.$new();d.element||d.container||(d.container='body'),u.$id=d.id||d.element&&d.element.attr('id')||'',h(['title','content'],function(e){d[e]&&(w[e]=c.trustAsHtml(d[e]))}),w.$hide=function(){w.$$postDigest(function(){u.hide()})},w.$show=function(){w.$$postDigest(function(){u.show()})},w.$toggle=function(){w.$$postDigest(function(){u.toggle()})},u.$isShown=w.$isShown=!1,d.contentTemplate&&(u.$promise=u.$promise.then(function(e){var t=angular.element(e);return f(d.contentTemplate).then(function(e){var o=p('[ng-bind="content"]',t[0]).removeAttr('ng-bind').html(e);return n.template||o.next().remove(),t[0].outerHTML})}));var k,x,y=angular.element('<div class="'+d.prefixClass+'-backdrop"/>');return y.css({position:'fixed',top:'0px',left:'0px',bottom:'0px',right:'0px','z-index':1038}),u.$promise.then(function(e){angular.isObject(e)&&(e=e.data),d.html&&(e=e.replace(b,'ng-bind-html="')),e=$.apply(e),k=o(e),u.init()}),u.init=function(){d.show&&w.$$postDigest(function(){u.show()})},u.destroy=function(){x&&(x.remove(),x=null),y&&(y.remove(),y=null),w.$destroy()},u.show=function(){if(!u.$isShown){var e,n;if(angular.isElement(d.container)?(e=d.container,n=d.container[0].lastChild?angular.element(d.container[0].lastChild):null):d.container?(e=p(d.container),n=e[0]&&e[0].lastChild?angular.element(e[0].lastChild):null):(e=null,n=d.element),x=u.$element=k(w,function(e,n){}),!w.$emit(d.prefixEvent+'.show.before',u).defaultPrevented){x.css({display:'block'}).addClass(d.placement),d.animation&&(d.backdrop&&y.addClass(d.backdropAnimation),x.addClass(d.animation)),d.backdrop&&l.enter(y,v,null),angular.version.minor<=2?l.enter(x,e,n,i):l.enter(x,e,n).then(i),u.$isShown=w.$isShown=!0,m(w);var t=x[0];g(function(){t.focus()}),v.addClass(d.prefixClass+'-open'),d.animation&&v.addClass(d.prefixClass+'-with-'+d.animation),d.backdrop&&(x.on('click',r),y.on('click',r),y.on('wheel',s)),d.keyboard&&x.on('keyup',u.$onKeyUp)}}},u.hide=function(){u.$isShown&&(w.$emit(d.prefixEvent+'.hide.before',u).defaultPrevented||(angular.version.minor<=2?l.leave(x,a):l.leave(x).then(a),d.backdrop&&l.leave(y),u.$isShown=w.$isShown=!1,m(w),d.backdrop&&(x.off('click',r),y.off('click',r),y.off('wheel',s)),d.keyboard&&x.off('keyup',u.$onKeyUp)))},u.toggle=function(){u.$isShown?u.hide():u.show()},u.focus=function(){x[0].focus()},u.$onKeyUp=function(e){27===e.which&&u.$isShown&&(u.hide(),e.stopPropagation())},u}function m(e){e.$$phase||e.$root&&e.$root.$$phase||e.$digest()}function p(e,n){return angular.element((n||document).querySelectorAll(e))}function f(e){return w[e]?w[e]:w[e]=r.get(e,{cache:a}).then(function(e){return e.data})}var h=angular.forEach,$=String.prototype.trim,g=n.requestAnimationFrame||n.setTimeout,v=angular.element(n.document.body),b=/ng-bind="/gi,w={};return d}]}).directive('bsModal',['$window','$sce','$modal',function(e,n,t){return{restrict:'EAC',scope:!0,link:function(e,o,i,a){var r={scope:e,element:o,show:!1};angular.forEach(['template','contentTemplate','placement','backdrop','keyboard','html','container','animation','id','prefixEvent','prefixClass'],function(e){angular.isDefined(i[e])&&(r[e]=i[e])});var l=/^(false|0|)$/i;angular.forEach(['backdrop','keyboard','html','container'],function(e){angular.isDefined(i[e])&&l.test(i[e])&&(r[e]=!1)}),angular.forEach(['title','content'],function(t){i[t]&&i.$observe(t,function(o,i){e[t]=n.trustAsHtml(o)})}),i.bsModal&&e.$watch(i.bsModal,function(n,t){angular.isObject(n)?angular.extend(e,n):e.content=n},!0);var s=t(r);o.on(i.trigger||'click',s.toggle),e.$on('$destroy',function(){s&&s.destroy(),r=null,s=null})}}}]);
//# sourceMappingURL=../modules/modal.min.js.map